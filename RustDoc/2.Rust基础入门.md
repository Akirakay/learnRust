## 2.1 å˜é‡ç»‘å®šä¸Žè§£æž„

### ä¸ºä½• `Rust` é€‰æ‹©äº†æ‰‹åŠ¨è®¾å®šå˜é‡çš„å¯å˜æ€§

ä¸€èˆ¬æ¥è¯´ï¼Œå˜é‡ä¸€æ—¦åˆ›å»ºï¼Œè¦ä¹ˆå¯å˜ï¼ˆçµæ´»ï¼‰æˆ–è€…ä¸å¯å˜ï¼ˆå®‰å…¨ï¼‰ï¼Œè€Œ `Rust` çš„å˜é‡ä¸¤è€…éƒ½å…·æœ‰ã€‚

### å˜é‡ç»‘å®š

```rust
let a = "akira"
```

### å˜é‡å¯å˜æ€§

`Rust` çš„å˜é‡åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯***ä¸å¯å˜çš„***ï¼Œå¯ä»¥é€šè¿‡ `mut` å…³é”®å­—è®©å˜é‡å˜ä¸º***å¯å˜çš„***

ç¼–å†™ä»£ç ï¼š

```rust
fn main() {
    let x = 5;
    println!("The value of x is: {}", x);
    x = 6;
    println!("The value of x is: {}", x);
}
```

ä¿å­˜å¹¶è¿è¡Œï¼š

```bash
$ cargo run          
   Compiling variables v0.1.0 (/Users/akira/rustCode/learnRust/variables)
error[E0384]: cannot assign twice to immutable variable `x`
 --> src/main.rs:4:5
  |
2 |     let x = 5;
  |         -
  |         |
  |         first assignment to `x`
  |         help: consider making this binding mutable: `mut x`
3 |     println!("The value of x is: {}", x);
4 |     x = 6;
  |     ^^^^^ cannot assign twice to immutable variable

For more information about this error, try `rustc --explain E0384`.
error: could not compile `variables` due to previous error
```

å…·ä½“çš„é”™è¯¯åŽŸå› æ˜¯ `cannot assign twice to immutable variable x`

ä¿®æ”¹ä»£ç ï¼š

```rust
let mut x = 5;
```

å†æ¬¡è¿è¡Œï¼š

```bash
$ cargo run
   Compiling variables v0.1.0 (/Users/akira/rustCode/learnRust/variables)
    Finished dev [unoptimized + debuginfo] target(s) in 0.39s
     Running `target/debug/variables`
The value of x is: 5
The value of x is: 6
```

å¯å˜è¿˜æ˜¯ä¸å¯å˜ï¼Œæ›´å¤šçš„è¿˜æ˜¯å–å†³äºŽä½ çš„ä½¿ç”¨åœºæ™¯ï¼šçµæ´»ä¸Žå®‰å…¨ä¹‹é—´çš„æŠ‰æ‹©ã€‚å¯å˜å˜é‡æœ€å¤§çš„å¥½å¤„å°±æ˜¯ä½¿ç”¨ä¸Šçš„çµæ´»æ€§å’Œæ€§èƒ½ä¸Šçš„æå‡ã€‚

### å˜é‡è§£æž„

`let` è¡¨è¾¾å¼ç”¨äºŽå˜é‡çš„ç»‘å®šï¼Œè¿›è¡Œå¤æ‚å˜é‡çš„è§£æž„ã€‚

```rust
fn main() {
    let (a, mut b): (bool,bool) = (true, false);
    // a = true,ä¸å¯å˜; b = falseï¼Œå¯å˜
    println!("a = {:?}, b = {:?}", a, b);

    b = true;
    assert_eq!(a, b);
}
```

### è§£æž„å¼èµ‹å€¼

```rust
let (a, b, c, d, e);

    (a, b) = (1, 2);
    [c, .., d, _] = [1, 2, 3, 4, 5];
    Struct { e, .. } = Struct { e: 5 };

    assert_eq!([1, 2, 1, 4, 5], [a, b, c, d, e]);
```

>   è¿™ç§ä½¿ç”¨æ–¹å¼è·Ÿä¹‹å‰çš„ `let` ä¿æŒäº†ä¸€è‡´æ€§ï¼Œä½†æ˜¯ `let` ä¼šé‡æ–°ç»‘å®šï¼Œè€Œè¿™é‡Œä»…ä»…æ˜¯å¯¹ä¹‹å‰ç»‘å®šçš„å˜é‡è¿›è¡Œå†èµ‹å€¼ã€‚
>
>   ä½¿ç”¨ `+=` çš„èµ‹å€¼è¯­å¥è¿˜ä¸æ”¯æŒè§£æž„å¼èµ‹å€¼

### å˜é‡ä¸Žå¸¸é‡ä¹‹é—´çš„å·®å¼‚

-   å¸¸é‡ä¸å…è®¸ä½¿ç”¨ `mut`ã€‚**å¸¸é‡ä¸ä»…ä»…é»˜è®¤ä¸å¯å˜ï¼Œè€Œä¸”è‡ªå§‹è‡³ç»ˆä¸å¯å˜**ï¼Œå› ä¸ºå¸¸é‡åœ¨ç¼–è¯‘å®ŒæˆåŽï¼Œå·²ç»ç¡®å®šå®ƒçš„å€¼ã€‚
-   å¸¸é‡ä½¿ç”¨ `const` å…³é”®å­—è€Œä¸æ˜¯ `let` å…³é”®å­—æ¥å£°æ˜Žï¼Œå¹¶ä¸”å€¼çš„ç±»åž‹**å¿…é¡»**æ ‡æ³¨ã€‚

### å˜é‡é®è”½(shadowing)

`Rust` å…è®¸å£°æ˜Žç›¸åŒçš„å˜é‡åï¼Œåœ¨åŽé¢å£°æ˜Žçš„å˜é‡ä¼šé®è”½æŽ‰å‰é¢å£°æ˜Žçš„:

```rust
fn main() {
    let x = 5;
    // åœ¨mainå‡½æ•°çš„ä½œç”¨åŸŸå†…å¯¹ä¹‹å‰çš„xè¿›è¡Œé®è”½
    let x = x + 1;

    {
        // åœ¨å½“å‰çš„èŠ±æ‹¬å·ä½œç”¨åŸŸå†…ï¼Œå¯¹ä¹‹å‰çš„xè¿›è¡Œé®è”½
        let x = x * 2;
        println!("The value of x in the inner scope is: {}", x);
    }

    println!("The value of x is: {}", x);
}
```

è¿è¡Œï¼š

```bash
$ cargo run
   Compiling variables v0.1.0 (/Users/akira/rustCode/learnRust/variables)
    Finished dev [unoptimized + debuginfo] target(s) in 0.28s
     Running `./variables`
var shadowing
The value of x in the inner scope is: 12
The value of x is: 6
```

>   å¤šæ¬¡çš„`let`å£°æ˜Žäº†å¤šä¸ªåŒåå˜é‡ï¼Œä½¿ç”¨æ›´å¤šå†…å­˜
>
>   `mut`åªæ˜¯ä¿®æ”¹åŒä¸€å†…å­˜åœ°å€ä¸Šçš„å€¼ï¼Œä¸ä¼šå‘ç”Ÿå†…å­˜å¯¹è±¡çš„å†åˆ†é…ï¼Œæ€§èƒ½è¦æ›´å¥½

å˜é‡é®è”½çš„ä½œç”¨ï¼š
å¦‚æžœä½ åœ¨æŸä¸ªä½œç”¨åŸŸå†…æ— éœ€å†ä½¿ç”¨ä¹‹å‰çš„å˜é‡ï¼ˆåœ¨è¢«é®è”½åŽï¼Œæ— æ³•å†è®¿é—®åˆ°ä¹‹å‰çš„åŒåå˜é‡ï¼‰ï¼Œå¯ä»¥é‡å¤çš„ä½¿ç”¨å˜é‡åå­—

## 2.2 åŸºæœ¬ç±»åž‹

-   æ•°å€¼ç±»åž‹: æœ‰ç¬¦å·æ•´æ•° (`i8`, `i16`, `i32`, `i64`, `isize`)ã€ æ— ç¬¦å·æ•´æ•° (`u8`, `u16`, `u32`, `u64`, `usize`) ã€æµ®ç‚¹æ•° (`f32`, `f64`)ã€ä»¥åŠæœ‰ç†æ•°ã€å¤æ•°
-   å­—ç¬¦ä¸²ï¼šå­—ç¬¦ä¸²å­—é¢é‡å’Œå­—ç¬¦ä¸²åˆ‡ç‰‡ `&str`
-   å¸ƒå°”ç±»åž‹ï¼š `true`å’Œ`false`
-   å­—ç¬¦ç±»åž‹: è¡¨ç¤ºå•ä¸ª Unicode å­—ç¬¦ï¼Œå­˜å‚¨ä¸º 4 ä¸ªå­—èŠ‚
-   å•å…ƒç±»åž‹: å³ `()` ï¼Œå…¶å”¯ä¸€çš„å€¼ä¹Ÿæ˜¯ `()`

`Rust` æ˜¯ä¸€é—¨**é™æ€ç±»åž‹**è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘å™¨å¿…é¡»åœ¨ç¼–è¯‘æœŸçŸ¥é“æˆ‘ä»¬æ‰€æœ‰å˜é‡çš„ç±»åž‹ï¼Œä½†è¿™ä¸æ„å‘³ç€ä½ éœ€è¦ä¸ºæ¯ä¸ªå˜é‡æŒ‡å®šç±»åž‹ï¼Œå› ä¸º **Rust ç¼–è¯‘å™¨å¾ˆèªæ˜Žï¼Œå®ƒå¯ä»¥æ ¹æ®å˜é‡çš„å€¼å’Œä¸Šä¸‹æ–‡ä¸­çš„ä½¿ç”¨æ–¹å¼æ¥è‡ªåŠ¨æŽ¨å¯¼å‡ºå˜é‡çš„ç±»åž‹**

### 2.2.1 æ•°å€¼ç±»åž‹

#### æ•´æ•°ç±»åž‹

ç±»åž‹å®šä¹‰çš„å½¢å¼ç»Ÿä¸€ä¸ºï¼š`æœ‰æ— ç¬¦å· + ç±»åž‹å¤§å°(ä½æ•°)`

 eg: 

æœ‰ç¬¦å·ç±»åž‹ï¼ši8ï¼Œi16ï¼Œi32ï¼ˆé»˜è®¤ç±»åž‹ï¼‰ï¼Œi64ï¼Œi128ï¼Œisizeï¼ˆè§†æž¶æž„è€Œå®šï¼‰

æ— ç¬¦å·ç±»åž‹ï¼šu8ï¼Œu16ï¼Œu32ï¼Œu64ï¼Œu128ï¼Œusizeï¼ˆè§†æž¶æž„è€Œå®šï¼‰

>æ•´åž‹æº¢å‡ºï¼š
>
>debug æ¨¡å¼ä¸‹ä¼šæ£€æµ‹æ•°å€¼æº¢å‡ºï¼Œé€ æˆç¼–è¯‘å¤±è´¥ï¼ˆ`panic`ï¼‰
>
>--release æ¨¡å¼ä¸‹ä¸ä¼šæ£€æµ‹æº¢å‡ºï¼ŒRust ä¼šæŒ‰ç…§è¡¥ç å¾ªçŽ¯æº¢å‡ºï¼ˆ*twoâ€™s complement wrapping*ï¼‰çš„è§„åˆ™å¤„ç†
>
>è¦æ˜¾å¼å¤„ç†å¯èƒ½çš„æº¢å‡ºï¼Œå¯ä»¥ä½¿ç”¨æ ‡å‡†åº“é’ˆå¯¹åŽŸå§‹æ•°å­—ç±»åž‹æä¾›çš„è¿™äº›æ–¹æ³•ï¼š
>
>-   ä½¿ç”¨ `wrapping_*` æ–¹æ³•åœ¨æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½æŒ‰ç…§è¡¥ç å¾ªçŽ¯æº¢å‡ºè§„åˆ™å¤„ç†ï¼Œä¾‹å¦‚ `wrapping_add`
>-   å¦‚æžœä½¿ç”¨ `checked_*` æ–¹æ³•æ—¶å‘ç”Ÿæº¢å‡ºï¼Œåˆ™è¿”å›ž `None` å€¼
>-   ä½¿ç”¨ `overflowing_*` æ–¹æ³•è¿”å›žè¯¥å€¼å’Œä¸€ä¸ªæŒ‡ç¤ºæ˜¯å¦å­˜åœ¨æº¢å‡ºçš„å¸ƒå°”å€¼
>-   ä½¿ç”¨ `saturating_*` æ–¹æ³•ä½¿å€¼è¾¾åˆ°æœ€å°å€¼æˆ–æœ€å¤§å€¼

#### æµ®ç‚¹ç±»åž‹

ä¸¤ç§åŸºæœ¬ç±»åž‹ï¼š `f32` å’Œ `f64`ï¼ˆé»˜è®¤ï¼‰

#### NaN

å¯¹äºŽæ•°å­¦ä¸Šæœªå®šä¹‰çš„ç»“æžœï¼Œä½¿ç”¨`NaN`æ¥å¤„ç†

å¯ä»¥ä½¿ç”¨ `is_nan()` ç­‰æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•°å€¼æ˜¯å¦æ˜¯ `NaN` 

#### åºåˆ—ï¼ˆ`Range`ï¼‰

åºåˆ—åªå…è®¸ç”¨äºŽæ•°å­—æˆ–å­—ç¬¦ç±»åž‹ï¼ŒåŽŸå› æ˜¯ï¼šå®ƒä»¬å¯ä»¥è¿žç»­ã€‚

eg:

```rust
for i in 1..=5 {
    println!("{}",i);
}
output: 
1
2
3
4
5
```

#### æ€»ç»“ï¼š

-   **Rust æ‹¥æœ‰ç›¸å½“å¤šçš„æ•°å€¼ç±»åž‹**. ç†Ÿæ‚‰ç±»åž‹å ç”¨çš„å­—èŠ‚æ•°ä¸ŽèŒƒå›´
-   **ç±»åž‹è½¬æ¢å¿…é¡»æ˜¯æ˜¾å¼çš„**
-   **Rust çš„æ•°å€¼ä¸Šå¯ä»¥ä½¿ç”¨æ–¹æ³•**. ä¾‹å¦‚ä½ å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•æ¥å°† `13.14` å–æ•´ï¼š`13.14_f32.round()`



### 2.2.2 å­—ç¬¦ã€å¸ƒå°”ã€å•å…ƒç±»åž‹

#### å­—ç¬¦ç±»åž‹

Rust çš„å­—ç¬¦ä¸ä»…ä»…æ˜¯ `ASCII`ï¼Œæ‰€æœ‰çš„ `Unicode` å€¼éƒ½å¯ä»¥ä½œä¸º Rust å­—ç¬¦ã€‚

```rust
fn main() {
    let c = 'z';
    let z = 'â„¤';
    let g = 'å›½';
    let heart_eyed_cat = 'ðŸ˜»';
}
```

>   Rust çš„å­—ç¬¦åªèƒ½ç”¨ `''` æ¥è¡¨ç¤ºï¼Œ `""` æ˜¯ç•™ç»™å­—ç¬¦ä¸²çš„

#### å¸ƒå°”ï¼ˆboolï¼‰

å¸ƒå°”ç±»åž‹æœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼š`true` å’Œ `false`ï¼Œå¤§å°ä¸º `1` ä¸ªå­—èŠ‚ï¼š

```rust
fn main() {
    let t = true;

    let f: bool = false; // ä½¿ç”¨ç±»åž‹æ ‡æ³¨,æ˜¾å¼æŒ‡å®šfçš„ç±»åž‹

    if f {
        println!("è¿™æ˜¯æ®µæ¯«æ— æ„ä¹‰çš„ä»£ç ");
    }
}
```

#### å•å…ƒç±»åž‹

å•å…ƒç±»åž‹å°±æ˜¯ `()`ï¼Œå”¯ä¸€çš„å€¼ä¹Ÿæ˜¯ `()` ã€‚

`main` å‡½æ•°å°±è¿”å›žè¿™ä¸ªå•å…ƒç±»åž‹ `()`

æ²¡æœ‰è¿”å›žå€¼çš„å‡½æ•°åœ¨ Rust ä¸­æ˜¯æœ‰å•ç‹¬çš„å®šä¹‰çš„ï¼š`å‘æ•£å‡½æ•°`

### 2.2.3 è¯­å¥å’Œè¡¨è¾¾å¼

Rust çš„å‡½æ•°ä½“æ˜¯ç”±ä¸€ç³»åˆ—è¯­å¥ç»„æˆï¼Œæœ€åŽç”±ä¸€ä¸ªè¡¨è¾¾å¼æ¥è¿”å›žå€¼ï¼Œä¾‹å¦‚ï¼š

```rust
fn add_with_extra(x: i32, y: i32) -> i32 {
    let x = x + 1; // è¯­å¥
    let y = y + 5; // è¯­å¥
    x + y // è¡¨è¾¾å¼
}
```

è¡¨è¾¾å¼ä¼šåœ¨æ±‚å€¼åŽè¿”å›žä¸€ä¸ªå€¼

### 2.2.4 å‡½æ•°

![img](https://s2.loli.net/2022/03/10/nD7mvPi43Xpe9Of.png)

#### å‡½æ•°è¦ç‚¹

-   å‡½æ•°åå’Œå˜é‡åä½¿ç”¨ `snake case` ä¾‹å¦‚ `fn add_two() -> {}`
-   å‡½æ•°çš„ä½ç½®å¯ä»¥éšä¾¿æ”¾ï¼ŒRust ä¸å…³å¿ƒæˆ‘ä»¬åœ¨å“ªé‡Œå®šä¹‰äº†å‡½æ•°ï¼Œåªè¦æœ‰å®šä¹‰å³å¯
-   æ¯ä¸ªå‡½æ•°å‚æ•°éƒ½éœ€è¦æ ‡æ³¨ç±»åž‹

#### å‡½æ•°è¿”å›ž

å‡½æ•°çš„è¿”å›žå€¼å°±æ˜¯å‡½æ•°ä½“æœ€åŽä¸€æ¡è¡¨è¾¾å¼çš„è¿”å›žå€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ `return` æå‰è¿”å›žã€‚

#### `Rust` ä¸­ç‰¹æ®Šçš„è¿”å›žç±»åž‹

##### æ— è¿”å›žå€¼ `()`

å•å…ƒç±»åž‹ `()`ï¼Œæ˜¯ä¸€ä¸ªé›¶é•¿åº¦çš„å…ƒç»„ã€‚å®ƒæ²¡å•¥ä½œç”¨ï¼Œä½†æ˜¯å¯ä»¥ç”¨æ¥è¡¨è¾¾ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›žå€¼ï¼š

-   å‡½æ•°æ²¡æœ‰è¿”å›žå€¼ï¼Œé‚£ä¹ˆè¿”å›žä¸€ä¸ª `()`
-   é€šè¿‡ `;` ç»“å°¾çš„è¡¨è¾¾å¼è¿”å›žä¸€ä¸ª `()`

##### æ°¸ä¸è¿”å›žçš„å‡½æ•° `!`

ç”¨ `!` ä½œå‡½æ•°è¿”å›žç±»åž‹çš„æ—¶å€™ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°æ°¸ä¸è¿”å›ž

eg:

```rust
fn forever() -> ! {
  loop {
    //...
  };
}
```

 



